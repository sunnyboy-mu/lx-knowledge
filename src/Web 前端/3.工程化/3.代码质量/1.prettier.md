---
title: Prettier
createTime: 2025/12/19 20:29:55
permalink: /web/engineering/oxcldb5b/
---

## 1、Prettier 概述

- 官网：[https://prettier.io/](https://prettier.io/)
- 中文网：[https://prettier.nodejs.cn/](https://prettier.nodejs.cn/)

### 1.1、什么是 Prettier

- 有态度的代码格式化器
- 支持多种语言
- 与大多数编辑器集成
- 几乎没有选项

### 1.2、为什么使用 Prettier

- 保存时格式化代码
- 无需在代码审查中讨论风格
- 节省时间和精力

### 1.3、Prettier 关心的是什么

正确性、字符串、空行、多行对象、装饰器、模板字面量、分号、打印宽度、JSX、注释；

Prettier 只打印代码。它不会改变它。这是为了限制 Prettier 的范围

## 2、食用指南

### 2.1、安装 prettier 插件

```bash
npm install -D prettier
```

### 2.2、安装 VS Code 插件

- `Prettier - Code formatter`
  - 该扩展正在从 `esbenp.prettier-vscode` 迁移到 `prettier.prettier-vscode`
  - 推荐使用`prettier.prettier-vscode`在插件市场搜索安装
  - 但目前仍使用`esbenp.prettier-vscode`，在未来某个时间会弃用

### 2.3、推荐 Vs Code 配置

使用用户配置或工作区配置（`.vscode\settings.json`）都可以

- `editor.formatOnSav: true` 保存时设置文件格式
- `files.autoSave: onFocusChange` 当编辑器失去焦点时，会自动保存
- `editor.defaultFormatter esbenp.prettier-vscode` 设置 Prettier 为默认格式化程序

```json
{
  "editor.formatOnSave": true,
  "files.autoSave": "onFocusChange",
  "editor.defaultFormatter": "esbenp.prettier-vscode"
}
```

### 2.4、配置 npm 脚本

```json
"format": "prettier --write src/**/*.{js,ts,vue,jsx,tsx}"
```

注: `src/**/*.{js,ts,vue,jsx,tsx}` 为指定要格式化的文件（或目录），可以省略

使用命令`npm run format`对项目文件进行格式化

## 3、配置清单

### 3.1、配置文件

此处仅列举个人喜好的方式配置 Prettier（按优先顺序）：

1. `package.json`文件中的`prettier`键
2. 以`JSON`编写的`.prettierrc`文件
3. 使用`export default`导出对象的`prettier.config.js`或`prettier.config.mjs`
4. 使用`module.exports`导出对象的`prettier.config.cjs`

---

**小知识：使用可共享配置**

安装已发布的配置`npm install -D @xxxx/prettier-config`

然后，你可以在`package.json`中引用它，`"prettier": "@xxxx/prettier-config"`

**小知识：扩展可共享配置**

```js
import xxxxPrettierConfig from "@xxxx/prettier-config";

/**
 * @type {import("prettier").Config}
 */
const config = {
  ...xxxxPrettierConfig,
  semi: false,
};

export default config;
```

### 3.2、忽略文件

使用`.prettierignore`忽略（即不重新格式化）文件和文件夹

```bash
# Ignore artifacts:
build
coverage

# Ignore all HTML files:
**/*.html
```

### 3.3、常用选项

- Print Width: 打印宽度
- Tab Width: 指定每个缩进级别的空格数
- Tabs: 用制表符而不是空格缩进行
- Semicolons: 在语句末尾打印分号
- Quotes: 使用单引号而不是双引号
- Arrow Function Parentheses: 在唯一的箭头函数参数周围包含括号
- 更多选项：[https://prettier.nodejs.cn/docs/options](https://prettier.nodejs.cn/docs/options)

---

**推荐配置**

```json
{
  "semi": false,
  "singleQuote": true,
  "arrowParens": "avoid"
}
```

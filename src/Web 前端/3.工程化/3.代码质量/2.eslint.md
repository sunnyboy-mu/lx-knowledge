---
title: ESLint
createTime: 2025/12/19 20:30:33
permalink: /web/engineering/gvecxyh4/
---

## 1ã€è®¤è¯† ESLint

- å®˜ç½‘ï¼š[https://eslint.org/](https://eslint.org/)
- ä¸­æ–‡ç½‘ï¼š[https://eslint.nodejs.cn/](https://eslint.nodejs.cn/)

ESLint æ˜¯ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·ï¼ˆlinterï¼‰ï¼Œç”¨äºè¯†åˆ«å’ŒæŠ¥å‘Š ECMAScript/JavaScript ä»£ç ä¸­çš„é—®é¢˜æ¨¡å¼ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯æå‡ä»£ç ä¸€è‡´æ€§ã€é¿å…æ½œåœ¨é”™è¯¯ï¼Œå¹¶ç¡®ä¿éµå¾ªæœ€ä½³å®è·µã€‚

âœ¨ **æ ¸å¿ƒç‰¹æ€§**ï¼š
- **é—®é¢˜æ£€æµ‹**ï¼šä»æ½œåœ¨è¿è¡Œæ—¶é”™è¯¯åˆ°ä»£ç é£æ ¼é—®é¢˜å…¨é¢è¦†ç›–
- **å®Œå…¨æ’ä»¶åŒ–**ï¼šæ¯æ¡è§„åˆ™éƒ½æ˜¯ç‹¬ç«‹æ’ä»¶ï¼Œæ”¯æŒè¿è¡Œæ—¶æ‰©å±•
- **ç”Ÿæ€ä¸°å¯Œ**ï¼šæ”¯æŒç¤¾åŒºæ’ä»¶ã€è‡ªå®šä¹‰é…ç½®å’Œè§£æå™¨æ‰©å±•

> ğŸ“‹ ç³»ç»Ÿè¦æ±‚ï¼šéœ€è¦å®‰è£… Node.jsï¼ˆ^20.19.0ã€^22.13.0 æˆ– â‰¥24ï¼‰å¹¶æ”¯æŒ SSLï¼ˆå®˜æ–¹ Node.js å‘è¡Œç‰ˆå·²å†…ç½®ï¼‰

## 2ã€ä½¿ç”¨æŒ‡å— ğŸš€

### 2.1ã€å®‰è£… ESLint æ’ä»¶

```bash
npm i -D eslint globals @eslint/js
```

### 2.2ã€å®‰è£… VS Code æ’ä»¶

- `ESLint`
  - ä½¿ç”¨`dbaeumer.vscode-eslint`åœ¨æ’ä»¶å¸‚åœºæœç´¢å®‰è£…

### 2.3ã€é…ç½® npm è„šæœ¬

```json
"lint": "eslint src --fix"
```

ğŸ“ æ³¨ï¼š`src` ä¸ºå¾…æ£€æŸ¥ç›®å½•ï¼Œå¯çœç•¥ã€‚æ‰§è¡Œ `npm run lint` å³å¯è¿›è¡Œæ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤

ä½¿ç”¨å‘½ä»¤`npm run lint`å¯¹é¡¹ç›®æ–‡ä»¶è¿›è¡Œæ£€æŸ¥å¹¶ä¿®å¤

## 3ã€é…ç½®æ¸…å• âš™ï¸

### 3.1ã€é…ç½®æ–‡ä»¶

> ğŸ’¡ æ¨èä½¿ç”¨æ‰å¹³é…ç½®æ–‡ä»¶ï¼ˆeslintrc æ ¼å¼å·²å¼ƒç”¨ï¼‰

æ­¤å¤„ä»…åˆ—ä¸¾ä¸ªäººå–œå¥½çš„æ–¹å¼é…ç½® ESLintï¼š

- `eslint.config.js`ï¼ˆæ¨èï¼‰
- `eslint.config.mjs`
- `eslint.config.cjs`

å®ƒåº”è¯¥æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¹¶å¯¼å‡ºä¸€ä¸ª**é…ç½®å¯¹è±¡**çš„æ•°ç»„

```js
// eslint.config.js
import { defineConfig } from "eslint/config";

export default defineConfig([
  {
    rules: {
      semi: "error",
      "prefer-const": "error",
    },
  },
]);
```

> âš ï¸ æ³¨æ„ï¼šè‹¥ `package.json` æœªæŒ‡å®š `"type": "module"`ï¼Œéœ€ä½¿ç”¨ CommonJS æ ¼å¼ï¼ˆ`module.exports`ï¼‰

**TypeScript é…ç½®æ”¯æŒ**ï¼š
- Deno/Bunï¼šåŸç”Ÿæ”¯æŒ
- Node.jsï¼šéœ€å®‰è£… `jiti` ä¾èµ–ï¼ˆ`npm install -D jiti`ï¼‰
- æ”¯æŒæ‰©å±•åï¼š`.ts`ã€`.mts`ã€`.cts`

### 3.2ã€é…ç½®å¯¹è±¡

æ¯ä¸ªé…ç½®å¯¹è±¡éƒ½åŒ…å« ESLint éœ€è¦åœ¨ä¸€ç»„æ–‡ä»¶ä¸Šæ‰§è¡Œçš„æ‰€æœ‰ä¿¡æ¯ã€‚æ¯ä¸ªé…ç½®å¯¹è±¡éƒ½ç”±ä»¥ä¸‹å±æ€§ç»„æˆï¼š

- `name`: é…ç½®å¯¹è±¡çš„åç§°
- `basePath`: åº”ç”¨åˆ°çš„å­ç›®å½•è·¯å¾„
- `files`: åº”ç”¨äºçš„æ–‡ä»¶çš„é€šé…ç¬¦æ¨¡å¼æ•°ç»„
- `ignores`: å¿½ç•¥æ–‡ä»¶çš„é€šé…ç¬¦æ¨¡å¼æ•°ç»„
- `extends`: è¦åº”ç”¨çš„å…¶ä»–é…ç½®çš„å­—ç¬¦ä¸²ã€é…ç½®å¯¹è±¡æˆ–é…ç½®æ•°ç»„çš„æ•°ç»„
- `languageOptions`: åŒ…å«ä¸å¦‚ä½•ä¸ºä»£ç æ£€æŸ¥é…ç½® JavaScript ç›¸å…³çš„è®¾ç½®çš„å¯¹è±¡
  - `ecmaVersion`: æ”¯æŒçš„ ECMAScript ç‰ˆæœ¬ï¼Œé»˜è®¤ï¼šlatest
  - `sourceType`: JavaScript æºä»£ç çš„ç±»å‹ï¼Œå¯é€‰å€¼ï¼šscriptã€moduleã€commonjsï¼Œé»˜è®¤ï¼šmodule
  - `globals`: æ·»åŠ åˆ°å…¨å±€ä½œç”¨åŸŸçš„å…¶ä»–å¯¹è±¡
  - `parser`: åŒ…å« parse() æ–¹æ³•æˆ– parseForESLint() æ–¹æ³•çš„å¯¹è±¡
  - `parserOptions`: å¯ç”¨é€‰é¡¹å–å†³äºè§£æå™¨
- `linterOptions`: åŒ…å«ä¸ä»£ç æ£€æŸ¥è¿‡ç¨‹ç›¸å…³çš„è®¾ç½®çš„å¯¹è±¡
  - `noInlineConfig`: æ˜¯å¦å…è®¸å†…è”é…ç½®
  - `reportUnusedDisableDirectives`: æ˜¯å¦ä»¥åŠå¦‚ä½•åº”è·Ÿè¸ªå’ŒæŠ¥å‘Šæœªä½¿ç”¨çš„ç¦ç”¨å’Œå¯ç”¨æŒ‡ä»¤
  - `reportUnusedInlineConfigs`: æ˜¯å¦ä»¥åŠå¦‚ä½•è·Ÿè¸ªå’ŒæŠ¥å‘Šæœªä½¿ç”¨çš„å†…è”é…ç½®ï¼Œé»˜è®¤ï¼šoff
- `processor`: åŒ…å« preprocess() å’Œ postprocess() æ–¹æ³•çš„å¯¹è±¡æˆ–æŒ‡ç¤ºæ’ä»¶å†…å¤„ç†å™¨åç§°çš„å­—ç¬¦ä¸²
- `plugins`: æ’ä»¶
- `rules`: é…ç½®è§„åˆ™
- `settings`: è®¾ç½®

---

**æ‹“å±•: å…¨å±€å¿½ç•¥**

ä½¿ç”¨ globalIgnores() è¾…åŠ©å‡½æ•°æ¥æŒ‡å®šè¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼

```js
// eslint.config.js
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([globalIgnores([".config/*"])]);
```

## 4ã€æ¨èé…ç½® ğŸ¯

> æ›´å¤šè§„åˆ™: [https://eslint.nodejs.cn/docs/latest/rules/](https://eslint.nodejs.cn/docs/latest/rules/)

### 4.1ã€åŸºç¡€ JavaScript

```js
import js from "@eslint/js";
import globals from "globals";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    }
  },
  {
    plugins: {},
    rules: {
      // ç¦æ­¢ä½¿ç”¨ var å£°æ˜å˜é‡ï¼Œä½¿ç”¨ var ä¼šè§¦å‘é”™è¯¯
      'no-var': 'error',
      // å…³é—­ç¦æ­¢ä½¿ç”¨å¼‚æ­¥ Promise æ‰§è¡Œå™¨çš„è§„åˆ™
      'no-async-promise-executor': 'off',
      // å…³é—­ç¦æ­¢ä½¿ç”¨æœªå®šä¹‰å˜é‡çš„è§„åˆ™
      'no-undef': 'off',
    }
  }
]);
```

### 4.2ã€åŸºç¡€ TypeScript

**å®‰è£…`typescript-eslint`æ’ä»¶**

```bash
npm i -D typescript-eslint
```

**é…ç½®æ–‡ä»¶**

```js
import js from "@eslint/js";
import globals from "globals";
import tseslint from "typescript-eslint";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    }
  },
  tseslint.configs.recommended,
  {
    plugins: {},
    rules: {
      // ç¦æ­¢ä½¿ç”¨ var å£°æ˜å˜é‡ï¼Œä½¿ç”¨ var ä¼šè§¦å‘é”™è¯¯
      'no-var': 'error',
      // è¦æ±‚ç±»å‹å®šä¹‰ç»Ÿä¸€ä½¿ç”¨ interfaceï¼Œè¿åæ­¤è§„åˆ™ä¼šè§¦å‘é”™è¯¯
      '@typescript-eslint/consistent-type-definitions': ['error', 'interface'],
      // å…³é—­ç¦æ­¢ä½¿ç”¨æ˜¾å¼ any ç±»å‹çš„è§„åˆ™
      '@typescript-eslint/no-explicit-any': 'off',
      // å…³é—­ç¦æ­¢ä½¿ç”¨å¼‚æ­¥ Promise æ‰§è¡Œå™¨çš„è§„åˆ™
      'no-async-promise-executor': 'off',
      // å…³é—­ç¦æ­¢ä½¿ç”¨æœªå®šä¹‰å˜é‡çš„è§„åˆ™
      'no-undef': 'off',
    }
  }
]);
```

### 4.3ã€TypeScript + Vue

**å®‰è£…`typescript-eslint`å’Œ`eslint-plugin-vue`æ’ä»¶**

```bash
npm i -D typescript-eslint eslint-plugin-vue
```

**é…ç½®æ–‡ä»¶**

```js
import js from "@eslint/js";
import globals from "globals";
import tseslint from "typescript-eslint";
import pluginVue from "eslint-plugin-vue";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    }
  },
  tseslint.configs.recommended,
  pluginVue.configs["flat/essential"],
  {
    files: ["**/*.vue"],
    languageOptions: {
      parserOptions: {
        parser: tseslint.parser
      }
    }
  },
  {
    plugins: {},
    rules: {
      // ç¦æ­¢ä½¿ç”¨ var å£°æ˜å˜é‡ï¼Œä½¿ç”¨ var ä¼šè§¦å‘é”™è¯¯
      'no-var': 'error',
      // è¦æ±‚ç±»å‹å®šä¹‰ç»Ÿä¸€ä½¿ç”¨ interfaceï¼Œè¿åæ­¤è§„åˆ™ä¼šè§¦å‘é”™è¯¯
      '@typescript-eslint/consistent-type-definitions': ['error', 'interface'],
      // å…³é—­ç¦æ­¢ä½¿ç”¨æ˜¾å¼ any ç±»å‹çš„è§„åˆ™
      '@typescript-eslint/no-explicit-any': 'off',
      // å…³é—­ Vue ç»„ä»¶åå¿…é¡»ä¸ºå¤šå•è¯çš„è§„åˆ™
      'vue/multi-word-component-names': 'off',
      // å…³é—­ç¦æ­¢ä½¿ç”¨å¼‚æ­¥ Promise æ‰§è¡Œå™¨çš„è§„åˆ™
      'no-async-promise-executor': 'off',
      // å…³é—­ç¦æ­¢ä½¿ç”¨æœªå®šä¹‰å˜é‡çš„è§„åˆ™
      'no-undef': 'off',
    }
  }
]);
```

## 5ã€æ€»ç»“ ğŸ“‹

ESLint æä¾›äº†å®Œæ•´çš„ JavaScript/TypeScript ä»£ç è´¨é‡ä¿éšœæ–¹æ¡ˆï¼Œé€šè¿‡çµæ´»çš„é…ç½®ä½“ç³»å’Œä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œèƒ½å¤Ÿé€‚åº”å„ç§é¡¹ç›®éœ€æ±‚ã€‚å»ºè®®æ ¹æ®é¡¹ç›®æŠ€æœ¯æ ˆé€‰æ‹©åˆé€‚çš„é…ç½®æ–¹æ¡ˆï¼Œå¹¶å®šæœŸæ›´æ–°è§„åˆ™ä»¥ä¿æŒä»£ç è´¨é‡çš„æœ€ä½³çŠ¶æ€ã€‚

ğŸ”— **æ›´å¤šè§„åˆ™å‚è€ƒ**ï¼š[https://eslint.nodejs.cn/docs/latest/rules/](https://eslint.nodejs.cn/docs/latest/rules/)
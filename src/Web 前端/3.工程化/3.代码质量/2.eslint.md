---
title: ESLint
createTime: 2025/12/19 20:30:33
permalink: /web/engineering/gvecxyh4/
---

## 1、你好 ESLint

- 官网：[https://eslint.org/](https://eslint.org/)
- 中文网：[https://eslint.nodejs.cn/](https://eslint.nodejs.cn/)

ESLint 是一个可配置的 JavaScript linter。它可以帮助你发现并修复 JavaScript 代码中的问题。问题可以是任何事情，从潜在的运行时错误到不遵循最佳实践，再到样式问题。

ESLint 是一个用于识别和报告在 ECMAScript/JavaScript 代码中发现的模式的工具，其目标是使代码更加一致并避免错误。

ESLint 是完全插件化的。每条规则都是一个插件，你可以在运行时添加更多。你还可以添加社区插件、配置和解析器来扩展 ESLint 的功能。

> 先决条件
>
> 要使用 ESLint，你必须安装并构建 Node.js（20.19.0、22.13.0 或 >=24）并支持 SSL。（如果你使用的是官方 Node.js 发行版，则始终内置 SSL。）

## 2、食用指南

### 2.1 安装 ESLint 插件

```bash
npm i -D eslint globals @eslint/js
```

### 2.2、安装 VS Code 插件

- `ESLint`
  - 使用`dbaeumer.vscode-eslint`在插件市场搜索安装

### 2.3、配置 npm 脚本

```json
 "lint": "eslint src --fix"
```

注: `src` 为指定要检查并修复的目录，可以省略

使用命令`npm run lint`对项目文件进行检查并修复

## 3、配置清单

### 3.1、配置文件

> 推荐使用扁平配置文件。现已弃用 eslintrc 格式

此处仅列举个人喜好的方式配置 ESLint：

- `eslint.config.js`
- `eslint.config.mjs`
- `eslint.config.cjs`

它应该放在项目的根目录下，并导出一个**配置对象**的数组

```js
// eslint.config.js
import { defineConfig } from "eslint/config";

export default defineConfig([
  {
    rules: {
      semi: "error",
      "prefer-const": "error",
    },
  },
]);
```

> 如果你的项目在其`package.json`文件中没有指定`"type":"module"`，则`eslint.config.js`必须是 CommonJS 格式，使用`module.exports`导出

---

**拓展: TypeScript 配置文件**

对于 Deno 和 Bun，TypeScript 配置文件是原生支持的；对于 Node.js，你必须在项目中安装可选的开发依赖 jiti（`npm install -D jiti
`），版本为 2.2.0 或更高版本（ESLint 不会自动安装此依赖）

然后，你可以创建一个带有 .ts、.mts 或 .cts 扩展名的配置文件，并导出 配置对象 数组

### 3.2、配置对象

每个配置对象都包含 ESLint 需要在一组文件上执行的所有信息。每个配置对象都由以下属性组成：

- `name`: 配置对象的名称
- `basePath`: 应用到的子目录路径
- `files`: 应用于的文件的通配符模式数组
- `ignores`: 忽略文件的通配符模式数组
- `extends`: 要应用的其他配置的字符串、配置对象或配置数组的数组
- `languageOptions`: 包含与如何为代码检查配置 JavaScript 相关的设置的对象
  - `ecmaVersion`: 支持的 ECMAScript 版本，默认：latest
  - `sourceType`: JavaScript 源代码的类型，可选值：script、module、commonjs，默认：module
  - `globals`: 添加到全局作用域的其他对象
  - `parser`: 包含 parse() 方法或 parseForESLint() 方法的对象
  - `parserOptions`: 可用选项取决于解析器
- `linterOptions`: 包含与代码检查过程相关的设置的对象
  - `noInlineConfig`: 是否允许内联配置
  - `reportUnusedDisableDirectives`: 是否以及如何应跟踪和报告未使用的禁用和启用指令
  - `reportUnusedInlineConfigs`: 是否以及如何跟踪和报告未使用的内联配置，默认：off
- `processor`: 包含 preprocess() 和 postprocess() 方法的对象或指示插件内处理器名称的字符串
- `plugins`: 插件
- `rules`: 配置规则
- `settings`: 设置

---

**拓展: 全局忽略**

使用 globalIgnores() 辅助函数来指定要忽略的文件模式

```js
// eslint.config.js
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([globalIgnores([".config/*"])]);
```

## 4、推荐配置

> 更多规则: https://eslint.nodejs.cn/docs/latest/rules/

### 4.1、基础 JavaScript

```js
import js from "@eslint/js";
import globals from "globals";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    },
  },
  {
    plugins: {},
    rules: {
      // 禁止使用 var 声明变量，使用 var 会触发错误
      "no-var": "error",
      // 关闭禁止使用异步 Promise 执行器的规则
      "no-async-promise-executor": "off",
      // 关闭禁止使用未定义变量的规则
      "no-undef": "off",
    },
  },
]);
```

### 4.2、基础 TypeScript

```js
import js from "@eslint/js";
import globals from "globals";
import tseslint from "typescript-eslint";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    },
  },
  tseslint.configs.recommended,
  {
    plugins: {},
    rules: {
      // 禁止使用 var 声明变量，使用 var 会触发错误
      "no-var": "error",
      // 要求类型定义统一使用 interface，违反此规则会触发错误
      "@typescript-eslint/consistent-type-definitions": ["error", "interface"],
      // 关闭禁止使用显式 any 类型的规则
      "@typescript-eslint/no-explicit-any": "off",
      // 关闭禁止使用异步 Promise 执行器的规则
      "no-async-promise-executor": "off",
      // 关闭禁止使用未定义变量的规则
      "no-undef": "off",
    },
  },
]);
```

### 4.3、TypeScript + Vue

```js
import js from "@eslint/js";
import globals from "globals";
import tseslint from "typescript-eslint";
import pluginVue from "eslint-plugin-vue";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["**/*.config.{js,mjs,cjs,ts,mts,cts}"]),
  {
    files: ["**/*.{js,mjs,cjs,ts,mts,cts,vue}"],
    plugins: { js },
    extends: ["js/recommended"],
    languageOptions: {
      globals: globals.browser,
    },
  },
  tseslint.configs.recommended,
  pluginVue.configs["flat/essential"],
  {
    files: ["**/*.vue"],
    languageOptions: {
      parserOptions: {
        parser: tseslint.parser,
      },
    },
  },
  {
    plugins: {},
    rules: {
      // 禁止使用 var 声明变量，使用 var 会触发错误
      "no-var": "error",
      // 要求类型定义统一使用 interface，违反此规则会触发错误
      "@typescript-eslint/consistent-type-definitions": ["error", "interface"],
      // 关闭禁止使用显式 any 类型的规则
      "@typescript-eslint/no-explicit-any": "off",
      // 关闭 Vue 组件名必须为多单词的规则
      "vue/multi-word-component-names": "off",
      // 关闭禁止使用异步 Promise 执行器的规则
      "no-async-promise-executor": "off",
      // 关闭禁止使用未定义变量的规则
      "no-undef": "off",
    },
  },
]);
```
